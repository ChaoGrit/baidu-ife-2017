<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>闭包</title>
</head>
<body>

<script type="text/javascript">
/********闭包*********/
// function selfAdd(){
// 	var a = 1;
// 	return function(){
// 		a++;
// 		console.log(a);
// 	} 
// }

// var m1 = selfAdd();//引用同一个a
// m1();
// m1();



// document.body.innerHTML = '<div id=div1>aaa</div>'+'<div id=div2>bbb</div>'+'<div id=div3>ccc</div>';
 /*第一种,无论点击哪个div都显示4*/
// for (var i = 1; i < 4; i++) {
// 	document.getElementById('div'+i).addEventListener('click',function(){
// 		console.log(i);/*循环绑定完以后再去触发事件的，结果都是4*/
// 	});
// }
 /*第二种，点击divi显示i*/
 // for(var i = 1; i < 4; i++){
 // 	!function(i){
 // 		document.getElementById('div'+i).addEventListener('click',function(){
 // 			console.log(i);
 // 		});
 // 	}(i);
 // }

/*********利用闭包进行函数的封装**********/

// (function(){
// 	var userId_ = 1;
// 	var typeId_ = 'item';
// 	var export_ = {};
// 	function converter(userId_){
// 		return +userId_;
// 	}
// 	export_.getUserId = function(){
// 		return converter(userId_);
// 	}
// 	export_.getTypeId = function(){
// 		return typeId_;
// 	}
// 	window.export = export_; 
// }());

/*******例子*******/
function buildList(list){
	var result = [];
	for (var i = 0; i < list.length; i++) {
		var item = 'item' + i;
		result.push(function(){
			console.log(item + ' ' + list[i]);
		});
	}
	return result;
}
function testList(){
	var fnList = buildList([1,2,3]);
	// console.log(fnList)
	for (var j = 0; j < fnList.length; j++) {
		console.log(fnList)
		fnList[j]();
	}
}
testList();

</script>

</body>
</html>